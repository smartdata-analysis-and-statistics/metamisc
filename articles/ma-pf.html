<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="metamisc">
<title>Meta-analysis of prognostic factors • metamisc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Meta-analysis of prognostic factors">
<meta property="og:description" content="metamisc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">metamisc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ma-pf.html">Meta-analysis of prognostic factors</a>
    <a class="dropdown-item" href="../articles/ma-pm.html">Meta-analysis of prediction model performance</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/smartdata-analysis-and-statistics/metamisc/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Meta-analysis of prognostic factors</h1>
                        <h4 data-toc-skip class="author">Thomas
Debray</h4>
                        
      
      <small class="dont-index">Source: <a href="https://github.com/smartdata-analysis-and-statistics/metamisc/blob/HEAD/vignettes/ma-pf.Rmd" class="external-link"><code>vignettes/ma-pf.Rmd</code></a></small>
      <div class="d-none name"><code>ma-pf.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>An important task in medical research is the identification and
assessment of prognostic factors. A prognostic factor is any measure
that, among people with a given health condition (that is, a
startpoint), is associated with a subsequent clinical outcome (an
endpoint) <span class="citation">(Riley 2013)</span>. Commonly
investigated prognostic factors include simple measures such as age,
sex, and size of tumor, but they can also include more complex factors
such as abnormal levels of proteins or catecholamines and unusual
genetic mutations <span class="citation">(Sauerbrei and Altman
2006)</span>. They can be useful as modifiable targets for interventions
to improve outcomes, building blocks for prognostic models, or
predictors of differential treatment response.</p>
<p>Over the past few decades, numerous prognostic factor studies have
been published in the medical literature. For example, <span class="citation">Riley and Burchill (2003)</span> identified 260 studies
reporting associations for 130 different tumour markers for
neuroblastoma. More recently, <span class="citation">Tzoulaki and
Ioannidis (2009)</span> identified 79 studies reporting the added value
of 86 different markers when added to the Framingham risk score. Despite
this huge research effort, the prognostic value of most traditional
factors under discussion is uncertain and the usefulness of many
specific markers, prognostic indices, and classification schemes is
still unproven <span class="citation">(Sauerbrei and Altman
2006)</span>.</p>
<p>This vignette aims to illustrate how the results from multiple
prognostic factor studies can be summarized and how sources of
between-study heterogeneity can be examined. Hereto, we will use the R
packages <strong>metamisc</strong> and <strong>metafor</strong>. The <a href="metafor">https://cran.r-project.org/package=metafor</a> package
provides a comprehensive collection of functions for conducting
meta-analyses in R. The <a href="metamisc">https://cran.r-project.org/package=metamisc</a> package
provides additional functions to facilitate meta-analysis of prognosis
studies. We can load these packages as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.metafor-project.org" class="external-link">metafor</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/smartdata-analysis-and-statistics/metamisc" class="external-link">metamisc</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="case-study">Case Study<a class="anchor" aria-label="anchor" href="#case-study"></a>
</h2>
<p>Endometrial cancer (EC) is the fourth most common malignancy in women
and the most common gynecologic cancer. Overall, the 5-year survival
rates for EC are approximately 78–90% for stage I, 74% for stage II,
36–57% for stage III, and 20% for stage IV. Such poor outcomes raise an
urgent requirement that more accurate prognosis and predictive markers
should be applied for EC to guide the therapy and monitor the disease
progress for individual patients.</p>
<p>Several biological molecules have been proposed as prognostic
biomarkers in EC. Among them, hormone receptors such as estrogen
receptors (ER), progesterone receptors (PR), and human epidermal growth
factor receptor 2 (HER2) are attractive because of their physiological
functions. Recently, Zhang conducted a systematic review to evaluate the
overall risk of these hormone receptors for endometrial cancer survival
<span class="citation">(Zhang and Sun 2015)</span>. This review included
16 studies recruiting 1764 patients for HER2. For each study, estimates
of effect were retrieved as follows. The simplest method consisted in
the direct collection of HR, odds ratio or risk ratio, and their 95% CI
from the original article, with an HR of less than 1 being associated
with a better outcome. If not available, the total numbers of observed
deaths/cancer recurrences and the numbers of patients in each group were
extracted to calculate HR. When data were only available as Kaplan-Meier
curves, data were extracted from the graphical survival plots, and
estimation of the HR was then performed using the described method.</p>
<p>We can load the data from all 16 studies in R as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Zhang</span><span class="op">)</span></span></code></pre></div>
<p>This creates an object <code>Zhang</code> that contains the summary
data from 14 studies reporting on overall survival (OS) and from 6
studies reporting on progression-free survival (PFS). A total of 14
studies assessed the relation between HER2 and overall survival. The
corresponding hazard ratios (HR) are given below:</p>
<table class="table">
<colgroup>
<col width="31%">
<col width="18%">
<col width="12%">
<col width="5%">
<col width="31%">
</colgroup>
<thead><tr class="header">
<th align="left">Study</th>
<th align="center">Country</th>
<th align="center">Disease</th>
<th align="right">N</th>
<th align="center">Hazard Ratio (95% CI)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Gonzalez-Rodilla, 2013</td>
<td align="center">Spain</td>
<td align="center">EC</td>
<td align="right">126</td>
<td align="center">1.14 (0.52; 2.52)</td>
</tr>
<tr class="even">
<td align="left">Togami, 2012</td>
<td align="center">Japan</td>
<td align="center">UPSC</td>
<td align="right">71</td>
<td align="center">3 (1.15; 7.01)</td>
</tr>
<tr class="odd">
<td align="left">Mori, 2010</td>
<td align="center">Japan</td>
<td align="center">EEC</td>
<td align="right">63</td>
<td align="center">2.58 (1.03; 7.92)</td>
</tr>
<tr class="even">
<td align="left">Jongen, 2009</td>
<td align="center">Netherlands</td>
<td align="center">EEC</td>
<td align="right">315</td>
<td align="center">0.66 (0.1; 4.28)</td>
</tr>
<tr class="odd">
<td align="left">Konecny, 2009</td>
<td align="center">USA</td>
<td align="center">EC</td>
<td align="right">273</td>
<td align="center">2.13 (1.65; 2.73)</td>
</tr>
<tr class="even">
<td align="left">Odicino, 2008</td>
<td align="center">Italy</td>
<td align="center">UPSC</td>
<td align="right">10</td>
<td align="center">1.6 (0.89; 2.89)</td>
</tr>
<tr class="odd">
<td align="left">Santin, 2005</td>
<td align="center">USA</td>
<td align="center">UPSC</td>
<td align="right">30</td>
<td align="center">5.19 (1.52; 17.64)</td>
</tr>
<tr class="even">
<td align="left">Santin, 2005</td>
<td align="center">USA</td>
<td align="center">UPSC</td>
<td align="right">27</td>
<td align="center">12.43 (1.57; 98.28)</td>
</tr>
<tr class="odd">
<td align="left">Backe, 1997</td>
<td align="center">Germany</td>
<td align="center">EC</td>
<td align="right">222</td>
<td align="center">1.17 (0.93; 1.49)</td>
</tr>
<tr class="even">
<td align="left">Kohlberger, 1996</td>
<td align="center">Australia</td>
<td align="center">EC</td>
<td align="right">100</td>
<td align="center">3.95 (1.07; 14.69)</td>
</tr>
<tr class="odd">
<td align="left">Saffari, 1995</td>
<td align="center">USA</td>
<td align="center">EC</td>
<td align="right">75</td>
<td align="center">5.25 (1.33; 20.74)</td>
</tr>
<tr class="even">
<td align="left">Peiro, 2004</td>
<td align="center">Germany</td>
<td align="center">EC</td>
<td align="right">10</td>
<td align="center">1.64 (1.04; 2.57)</td>
</tr>
<tr class="odd">
<td align="left">Cianciulli, 2003</td>
<td align="center">Italy</td>
<td align="center">EC</td>
<td align="right">73</td>
<td align="center">1.9 (0.83; 4.36)</td>
</tr>
<tr class="even">
<td align="left">Gates, 2006</td>
<td align="center">USA</td>
<td align="center">EC</td>
<td align="right">99</td>
<td align="center">4 (0.77; 20.8)</td>
</tr>
</tbody>
</table>
<p>Results suggest that the hormone receptor HER2 has prognostic value
for survival but is prone to substantial between-study heterogeneity.
For example, hazard ratios appear much larger for studies that were
conducted in the USA. Possibly, the variation in treatment effect
estimates is caused by differences in the baseline characteristics of
patients (age, tumor stage, race), differences in the cutoff value of
HER2, differences in received treatments, or differences in the duration
of follow-up. Importantly, because estimated hazard ratios have not been
adjusted for any patient-level covariates, they are particularly prone
to heterogeneity in patient spectrum.</p>
</div>
<div class="section level2">
<h2 id="first-steps">First steps<a class="anchor" aria-label="anchor" href="#first-steps"></a>
</h2>
<p>To facilitate any quantitative analysis, information on the standard
error of the different study effect sizes is needed. Estimates for the
standard error can be obtained from the reported 95% confidence
intervals <span class="citation">(Altman Douglas G. and Bland
2011)</span>. It is then commonly assumed that the log hazard ratio
follows a Normal distribution, such that he standard error (SE) of the
log hazard ratio is given as:</p>
<p><span class="math inline">\(\mathrm{SE}=(\log(u)-\log(l))/(2*1.96)\)</span></p>
<p>where the upper and lower limits of the 95% CI are <span class="math inline">\(u\)</span> and <span class="math inline">\(l\)</span> respectively. We can implement this
calculation as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Zhang</span> <span class="op">&lt;-</span> <span class="va">Zhang</span> <span class="op">%&gt;%</span> <span class="fu">mutate</span><span class="op">(</span>logHR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">HR</span><span class="op">)</span>, </span>
<span>                          se.logHR <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">HR.975</span><span class="op">/</span><span class="va">HR.025</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="fl">2</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.975</span><span class="op">)</span><span class="op">)</span></span>
<span>                          <span class="op">)</span></span></code></pre></div>
<p>It is often helpful to display the effect sizes of all studies in a
forest plot. An advantage of the forest plot is that allows a visual
inspection of the available evidence and facilitates the identification
of potential between-study heterogeneity. The forest plot for overall
survival can then be generated using the <code>forest</code> function in
<strong>metamisc</strong>. This requires to provide information on the
estimated hazard ratios (via the argument <code>theta</code>), as well
as the bounds of their 95% confidence interval (via
<code>theta.ci.lb</code> and <code>theta.ci.ub</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Select the 14 studies investigating overall survival</span></span>
<span><span class="va">dat_os</span> <span class="op">&lt;-</span> <span class="va">Zhang</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">==</span> <span class="st">"OS"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate a forest plot of the log hazard ratio</span></span>
<span><span class="fu">metamisc</span><span class="fu">::</span><span class="fu"><a href="../reference/forest.html">forest</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">HR</span>, </span>
<span>                 theta.ci.lb <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">HR.025</span>, </span>
<span>                 theta.ci.ub <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">HR.975</span>, </span>
<span>                 theta.slab <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">Study</span>, </span>
<span>                 xlab <span class="op">=</span> <span class="st">"Hazard ratio of HER2 versus OS"</span>, </span>
<span>                 refline <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="ma-pf_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<p>We can also generate a forest plot using
<strong>metafor</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">metafor</span><span class="fu">::</span><span class="fu"><a href="https://wviechtb.github.io/metafor/reference/forest.html" class="external-link">forest</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">HR</span>, </span>
<span>                ci.lb <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">HR.025</span>, </span>
<span>                ci.ub <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">HR.975</span>, </span>
<span>                slab <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">Study</span>,</span>
<span>                xlab <span class="op">=</span> <span class="st">"Hazard ratio of HER2 versus OS"</span>, </span>
<span>                refline <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="ma-pf_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="assessment-of-publication-bias">Assessment of publication bias<a class="anchor" aria-label="anchor" href="#assessment-of-publication-bias"></a>
</h2>
<p>The presence of small-study effects is a common threat to systematic
reviews and meta-analyses. Small-study effects is a generic term for the
phenomenon that sometimes smaller studies show different, often
stronger, effects than the large ones <span class="citation">(Debray and
Riley 2018)</span>. One possible reason is publication bias. Previously,
<span class="citation">D. G. Altman (2001)</span> argued that it is
probable that studies showing a strong (often statistically significant)
prognostic ability are more likely to be published. For this reason, it
is important to evaluate the potential presence of small-study effects,
which can be verified by visual inspection of the funnel plot. In this
plot, the estimate of the reported effect size is plotted against a
measure of precision or sample size for each included study of the
meta-analysis. The premise is that the scatter of plots should reflect a
funnel shape, if small-study effects do not exist (provided that effect
sizes are not substantially affected by the presence of between-study
heterogeneity). However, when small studies are predominately in one
direction (usually the direction of larger effect sizes), asymmetry will
ensue.</p>
<p>A common approach to construct the funnel plot is to display the
individual observed effect sizes on the x-axis against the corresponding
standard errors on the y-axis, and to use the fixed effect summary
estimate as reference value. In the absence of publication bias and
heterogeneity, one would then expect to see the points forming a funnel
shape, with the majority of the points falling inside of the
pseudo-confidence region of the summary estimate.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wviechtb.github.io/metafor/reference/rma.uni.html" class="external-link">rma</a></span><span class="op">(</span>yi <span class="op">=</span> <span class="va">logHR</span>, sei <span class="op">=</span> <span class="va">se.logHR</span>, method <span class="op">=</span> <span class="st">"FE"</span>, data <span class="op">=</span> <span class="va">dat_os</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://wviechtb.github.io/metafor/reference/funnel.html" class="external-link">funnel</a></span><span class="op">(</span><span class="va">res</span>, xlab <span class="op">=</span> <span class="st">"Log Hazard Ratio"</span><span class="op">)</span></span></code></pre></div>
<p><img src="ma-pf_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>In the case study, most study estimates fall within the
pseudo-confidence region, hence there appears limited evidence for
publication bias.</p>
<p>We can formally test the presence of asymmetry in the funnel plot by
evaluating whether there is an association between the estimated
standard error and the estimated effect size.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://wviechtb.github.io/metafor/reference/regtest.html" class="external-link">regtest</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">logHR</span>, </span>
<span>        sei <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">se.logHR</span>, </span>
<span>        model <span class="op">=</span> <span class="st">"lm"</span>, </span>
<span>        predictor <span class="op">=</span> <span class="st">"sei"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Regression Test for Funnel Plot Asymmetry</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Model:     weighted regression with multiplicative dispersion</span></span>
<span><span class="co">## Predictor: standard error</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Test for Funnel Plot Asymmetry: t = 2.1622, df = 12, p = 0.0515</span></span>
<span><span class="co">## Limit Estimate (as sei -&gt; 0):   b = 0.2590 (CI: -0.0760, 0.5939)</span></span></code></pre>
<p>It is common to use a 10% level of significance because the number of
studies in a meta-analysis is usually low. In the case study, the
P-value is 0.052, which implies there is evidence for funnel plot
asymmetry .</p>
<p>Funnel plot asymmetry tests can also be performed using
<strong>metamisc</strong> as follows:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">regfit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fat.html">fat</a></span><span class="op">(</span>b <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">logHR</span>, </span>
<span>              b.se <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">se.logHR</span>, </span>
<span>              method <span class="op">=</span> <span class="st">"E-FIV"</span><span class="op">)</span></span></code></pre></div>
<p>which yields</p>
<pre><code><span><span class="co">## Call: fat(b = dat_os$logHR, b.se = dat_os$se.logHR, method = "E-FIV")</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Fixed effect summary estimate:  0.5193  </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## test for funnel plot asymmetry: t =2.1622, df = 12, p = 0.0515</span></span></code></pre>
<p>Again, we can construct a funnel plot:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">regfit</span><span class="op">)</span></span></code></pre></div>
<p><img src="ma-pf_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>Some caution is warranted when interpreting the results for funnel
plot asymmetry tests <span class="citation">(Debray and Riley
2018)</span>. First, the power to detect asymmetry is often limited
because meta-analyses usually do not include many studies. Second, many
tests are known to yield inadequate type-I error rates or to suffer from
low power. For instance, it has been demonstrated that aforementioned
test to evaluate the association between the estimated standard error
and effect size tends to yield type-I error rates that are too high.
Finally, funnel plot asymmetry may rather be caused by heterogeneity
than by publication bias. We therefore adjust aforementioned regression
test to use inverse of the total sample size (rather than the standard
error) as predictor.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://wviechtb.github.io/metafor/reference/regtest.html" class="external-link">regtest</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">logHR</span>, </span>
<span>        sei <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">se.logHR</span>, </span>
<span>        ni <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">N</span>, </span>
<span>        model <span class="op">=</span> <span class="st">"lm"</span>, </span>
<span>        predictor <span class="op">=</span> <span class="st">"ninv"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Regression Test for Funnel Plot Asymmetry</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Model:     weighted regression with multiplicative dispersion</span></span>
<span><span class="co">## Predictor: inverse of the sample size</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Test for Funnel Plot Asymmetry: t = 0.1552, df = 12, p = 0.8793</span></span>
<span><span class="co">## Limit Estimate (as ni -&gt; inf):  b = 0.5088 (CI: 0.2226, 0.7950)</span></span></code></pre>
<p>From here onwards, we will assume that the potential for publication
bias is negligible, and proceed with standard meta-analysis methods.</p>
</div>
<div class="section level2">
<h2 id="meta-analysis-of-the-prognostic-value-of-her2">Meta-analysis of the prognostic value of HER2<a class="anchor" aria-label="anchor" href="#meta-analysis-of-the-prognostic-value-of-her2"></a>
</h2>
<p>Meta-analysis is an option when the identified studies are considered
sufficiently robust and comparable, and requires there are at least two
estimates of the same statistic across studies. A random effects
approach is often essential to allow for unexplained heterogeneity
across studies due to differences in their methods, time-scale,
populations, cut-points, adjustment factors, and treatments.</p>
<p>A standard random effects meta-analysis combines the study estimates
of the statistic of interest (here given as the log HR of HER2) in order
to estimate the average effect (denoted by <span class="math inline">\(\mu\)</span>) and its standard deviation (denoted
by <span class="math inline">\(\tau\)</span>) across studies. If <span class="math inline">\(\hat b_i\)</span> and <span class="math inline">\(\mathrm{var}(\hat b_i)\)</span> denote the
estimate and its variance in study <span class="math inline">\(i\)</span>, then a general random effects
meta-analysis model can be specified as:</p>
<p><span class="math inline">\(\hat b_i \sim N(\mu, \mathrm{var}(\hat
b_i) + \tau^2)\)</span></p>
<p>It is common to first estimate the heterogeneity parameter <span class="math inline">\(\tau\)</span> and to use the resulting value to
estimate <span class="math inline">\(\mu\)</span>. However, such
approach does not adequately reflect the error associated with parameter
estimation, especially when the number of studies is small. For this
reason, alternative estimators have been proposed that simultaneously
estimate <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\tau\)</span>. Here, we will focus on Restricted
Maximum Likelihood Estimation (REML), which is implemented as default in
<code>metafor</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resREML</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wviechtb.github.io/metafor/reference/rma.uni.html" class="external-link">rma</a></span><span class="op">(</span>yi <span class="op">=</span> <span class="va">logHR</span>, sei <span class="op">=</span> <span class="va">se.logHR</span>, method <span class="op">=</span> <span class="st">"REML"</span>, </span>
<span>               slab <span class="op">=</span> <span class="va">Study</span>, data <span class="op">=</span> <span class="va">dat_os</span><span class="op">)</span></span>
<span><span class="va">resREML</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Random-Effects Model (k = 14; tau^2 estimator: REML)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## tau^2 (estimated amount of total heterogeneity): 0.0883 (SE = 0.0854)</span></span>
<span><span class="co">## tau (square root of estimated tau^2 value):      0.2972</span></span>
<span><span class="co">## I^2 (total heterogeneity / total variability):   49.17%</span></span>
<span><span class="co">## H^2 (total variability / sampling variability):  1.97</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Test for Heterogeneity:</span></span>
<span><span class="co">## Q(df = 13) = 28.9214, p-val = 0.0067</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Model Results:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## estimate      se    zval    pval   ci.lb   ci.ub      </span></span>
<span><span class="co">##   0.6669  0.1354  4.9251  &lt;.0001  0.4015  0.9324  *** </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre>
<p>The pooled estimate for the log hazard ratio is 0.667 with a standard
error of 0.135. The between-study standard deviation of the log hazard
ratio is 0.297. We can extract the key statistics as follows:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summary estimate of the log hazard ratio for HER2</span></span>
<span><span class="va">mu</span> <span class="op">&lt;-</span> <span class="va">resREML</span><span class="op">$</span><span class="va">b</span></span>
<span></span>
<span><span class="co"># 95% confidence interval of the pooled log hazard ratio</span></span>
<span><span class="va">mu.ci</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">resREML</span><span class="op">$</span><span class="va">ci.lb</span>, <span class="va">resREML</span><span class="op">$</span><span class="va">ci.ub</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Between-study variance of the log hazard ratio</span></span>
<span><span class="va">tau2</span> <span class="op">&lt;-</span> <span class="va">resREML</span><span class="op">$</span><span class="va">tau2</span></span>
<span></span>
<span><span class="co"># Error variance of the pooled log hazard ratio</span></span>
<span><span class="va">sigma2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov</a></span><span class="op">(</span><span class="va">resREML</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Number of studies contributing to the meta-analyis</span></span>
<span><span class="va">numstudies</span> <span class="op">&lt;-</span> <span class="va">resREML</span><span class="op">$</span><span class="va">k.all</span></span></code></pre></div>
<p>We can use the information above to derive the summary estimate for
the hazard ratio and its corresponding 95% confidence interval:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">mu</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##             [,1]</span></span>
<span><span class="co">## intrcpt 1.948268</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">mu.ci</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 1.494104 2.540483</span></span></code></pre>
<p>The summary HR of HER2 is statistically significant, indicating that
increased levels of HER2 are associated with poorer survival. We can
also obtain the summary estimate and 95% CI for the HR of HER2 by simply
using the <code>predict</code> function:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">resREML</span>, transf <span class="op">=</span> <span class="va">exp</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##    pred  ci.lb  ci.ub  pi.lb  pi.ub </span></span>
<span><span class="co">##  1.9483 1.4941 2.5405 1.0272 3.6954</span></span></code></pre>
<p>Although the summary result (<span class="math inline">\(\hat
\mu\)</span>) is usually the main focus of a meta-analysis, this
reflects some average across studies and it may be hard to translate to
clinical practice when there is large between-study heterogeneity. We
can quantify the impact of between-study heterogeneity by constructing a
<span class="math inline">\(100(1-\alpha/2)\)</span>% prediction
interval, which gives the potential true prognostic effect in a new
population conditional on the meta-analysis results <span class="citation">(Riley and Deeks 2011)</span>. An approximate
prediction interval (PI) is given as follows:</p>
<p><span class="math inline">\(\hat \mu \pm t_{\alpha, N-2} \sqrt{\hat
\tau^2 + \hat \sigma^2}\)</span></p>
<p>where <span class="math inline">\(t_{\alpha, N-2}\)</span> is the
<span class="math inline">\(100(1-\alpha/2)\)</span>% percentile of the
t-distribution for <span class="math inline">\(N-2\)</span> degrees of
freedom, <span class="math inline">\(N\)</span> is the number of
studies, <span class="math inline">\(\hat \sigma\)</span> is the
estimated standard error of <span class="math inline">\(\hat
\mu\)</span>, and <span class="math inline">\(\hat \tau\)</span> is the
estimated between-study standard deviation. In <code>R</code>, can
calculate the approximate 95% PI for <span class="math inline">\(\hat
\mu\)</span> as follows:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">level</span> <span class="op">&lt;-</span> <span class="fl">0.05</span></span>
<span><span class="va">crit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">qt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">level</span><span class="op">/</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">-</span><span class="op">(</span><span class="va">level</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span>, df <span class="op">=</span> <span class="op">(</span><span class="va">numstudies</span> <span class="op">-</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pi_lower</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">mu</span> <span class="op">+</span> <span class="va">crit</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">tau2</span> <span class="op">+</span> <span class="va">sigma2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">pi_upper</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">mu</span> <span class="op">+</span> <span class="va">crit</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">tau2</span> <span class="op">+</span> <span class="va">sigma2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">pi_lower</span>, <span class="va">pi_upper</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.9563084 3.9691662</span></span></code></pre>
<p>The 95% prediction interval ranges from 0.956 to 3.969, and suggests
there is substantial heterogeneity in the prognostic value of HER2. In
particular, although increased levels of HER2 are generally associated
with poorer survival, they may also lead to improved survival (HR &lt;
1) in certain settings. We can add the summary estimate and prediction
interval to the forest plot:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate a forest plot of the log hazard ratio</span></span>
<span><span class="fu">metamisc</span><span class="fu">::</span><span class="fu"><a href="../reference/forest.html">forest</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">HR</span>, </span>
<span>                 theta.ci.lb <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">HR.025</span>, </span>
<span>                 theta.ci.ub <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">HR.975</span>, </span>
<span>                 theta.slab <span class="op">=</span> <span class="va">dat_os</span><span class="op">$</span><span class="va">Study</span>, </span>
<span>                 theta.summary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">mu</span><span class="op">)</span>,</span>
<span>                 theta.summary.ci.lb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">mu.ci</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                 theta.summary.ci.ub <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">mu.ci</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>,</span>
<span>                 theta.summary.pi.lb <span class="op">=</span> <span class="va">pi_lower</span>,</span>
<span>                 theta.summary.pi.ub <span class="op">=</span> <span class="va">pi_upper</span>,</span>
<span>                 xlab <span class="op">=</span> <span class="st">"Hazard ratio of HER2 versus OS"</span>, </span>
<span>                 refline <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="ma-pf_files/figure-html/unnamed-chunk-20-1.png" width="768"></p>
<p>A possible approach to enhance the interpretation of meta-analysis
results is to calculate the probability that the prognostic effect of
HER2 will be above some useful value (e.g. a HR &gt; 1.5 for a binary
factor, which indicates risk is increased by at least 50%) in a new
setting. We can calculate this probability as follows:</p>
<p><span class="math inline">\(Pr(\mathrm{HR} &gt; 1.5) = Pr(\hat \mu
&gt; \log(1.5)) = 1 - Pr(\hat \mu \leq \log(1.5))\)</span></p>
<p>where <span class="math inline">\(Pr(\hat \mu \leq
\log(1.5))\)</span> is approximated using a scaled Student-<span class="math inline">\(t\)</span> distribution (similar to the
calculation of our prediction interval):</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">probOS</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">pt</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fl">1.5</span><span class="op">)</span> <span class="op">-</span> <span class="va">mu</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">tau2</span> <span class="op">+</span> <span class="va">sigma2</span><span class="op">)</span>, df <span class="op">=</span> <span class="op">(</span><span class="va">numstudies</span> <span class="op">-</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">probOS</span></span></code></pre></div>
<pre><code><span><span class="co">##              [,1]</span></span>
<span><span class="co">## intrcpt 0.7805314</span></span></code></pre>
<p>The probability that HER2 will yield a hazard ratio for overall
survival of at least 1.5 in a new setting is 78%. This means that
despite the presence of between-study heterogeneity, it is likely that
HER2 will provide substantial discriminative ability when used as a
single prognostic factor in a new setting. We can also estimate this
probability by means of simulation:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate 100000 new studies</span></span>
<span><span class="va">Nsim</span> <span class="op">&lt;-</span> <span class="fl">1000000</span></span>
<span></span>
<span><span class="co"># Random draws from a Student T distribution</span></span>
<span><span class="va">rnd_t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/TDist.html" class="external-link">rt</a></span><span class="op">(</span><span class="va">Nsim</span>, df <span class="op">=</span> <span class="op">(</span><span class="va">numstudies</span> <span class="op">-</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate 1,000,000 hazard ratios</span></span>
<span><span class="va">HRsim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">mu</span><span class="op">)</span> <span class="op">+</span> <span class="va">rnd_t</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">tau2</span> <span class="op">+</span> <span class="va">sigma2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate the proportion of hazard ratios greater than  1.5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">HRsim</span> <span class="op">&gt;</span> <span class="fl">1.5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.780385</span></span></code></pre>
<p>Again, the probability that HER2 will yield a hazard ratio for
overall survival of &gt;1.5 in a new setting is 78%.</p>
</div>
<div class="section level2">
<h2 id="multivariate-meta-analysis">Multivariate meta-analysis<a class="anchor" aria-label="anchor" href="#multivariate-meta-analysis"></a>
</h2>
<p>In previous section, we used 14 of the 16 identified studies to
evaluate the prognostic effect of HER2 on overall survival. Two studies
were excluded from the meta-analysis because they did not provide direct
evidence about overall survival. This is unwelcome, especially if the
participants are otherwise representative of the population, clinical
settings, and condition of interest <span class="citation">(Riley and
White 2017)</span>. For this reason, we here discuss how multivariate
meta-analysis methods can be used to borrow strength from studies that
do not investigate the primary outcome of interest. Briefly,
multivariate meta-analysis methods simultaneously summarize the effect
size across multiple outcomes whilst accounting for their correlation.
For example, six studies in the review of <span class="citation">Zhang
and Sun (2015)</span> assessed the hazard ratio of HER2 for
progression-free survival, four of which also assessed overall survival.
Hence, by conducting a multivariate meta-analysis we can borrow strength
from two additional studies when estimating the hazard ratio for overall
survival. The hazard ratios for progression free survival are depicted
below:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Study</th>
<th align="center">Country</th>
<th align="center">Disease</th>
<th align="right">N</th>
<th align="center">Hazard Ratio (95% CI)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Togami, 2012</td>
<td align="center">Japan</td>
<td align="center">UPSC</td>
<td align="right">71</td>
<td align="center">3.43 (1.5; 7.23)</td>
</tr>
<tr class="even">
<td align="left">Mori, 2010</td>
<td align="center">Japan</td>
<td align="center">EEC</td>
<td align="right">63</td>
<td align="center">3.8 (1.29; 12.35)</td>
</tr>
<tr class="odd">
<td align="left">Jongen, 2009</td>
<td align="center">Netherlands</td>
<td align="center">EEC</td>
<td align="right">315</td>
<td align="center">1.75 (0.23; 13.08)</td>
</tr>
<tr class="even">
<td align="left">Coronado, 2001</td>
<td align="center">Spain</td>
<td align="center">EC</td>
<td align="right">114</td>
<td align="center">2.69 (1.35; 5.37)</td>
</tr>
<tr class="odd">
<td align="left">Backe, 1997</td>
<td align="center">Germany</td>
<td align="center">EC</td>
<td align="right">222</td>
<td align="center">1.36 (0.65; 2.85)</td>
</tr>
<tr class="even">
<td align="left">Vos, 2011</td>
<td align="center">England</td>
<td align="center">EC</td>
<td align="right">156</td>
<td align="center">1.41 (0.51; 3.88)</td>
</tr>
</tbody>
</table>
<p>We first conduct a univariate meta-analysis of the six studies
investigating progression-free survival:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat_pfs</span> <span class="op">&lt;-</span> <span class="va">Zhang</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">==</span> <span class="st">"PFS"</span><span class="op">)</span></span>
<span><span class="va">resPFS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wviechtb.github.io/metafor/reference/rma.uni.html" class="external-link">rma</a></span><span class="op">(</span>yi <span class="op">=</span> <span class="va">logHR</span>, </span>
<span>              sei <span class="op">=</span> <span class="va">se.logHR</span>, </span>
<span>              method <span class="op">=</span> <span class="st">"REML"</span>, </span>
<span>              slab <span class="op">=</span> <span class="va">Study</span>, </span>
<span>              data <span class="op">=</span> <span class="va">dat_pfs</span><span class="op">)</span></span></code></pre></div>
<p><img src="ma-pf_files/figure-html/unnamed-chunk-24-1.png" width="768"></p>
<p>Results indicate that the hormone receptor HER2 also has prognostic
value for progression-free survival. Furthermore, the reported HRs
appear to be much more homogeneous across studies, since the
between-study standard deviation is 0.17 for progression-free survival
whereas it was 0.30 for overall survival. Note that the univariate
meta-analysis for progression-free survival is based on merely 6
studies, and that the univariate meta-analysis for overall survival was
based on 14 studies. We can now employ multivariate meta-analysis to
borrow information from the 4 studies that report prognostic effects for
both endpoints. This, in turn, allows all studies to contribute on the
summary effect for HER2 in both outcomes.</p>
<p>We first need to define the within-study covariance matrix of the
estimated log hazard ratios for progression-free survival and overall
survival. We here assume that estimates for the hazard ratio are
independent within studies and construct a block diagonal matrix that
only considers the error variance of each estimate:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">V</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="va">Zhang</span><span class="op">$</span><span class="va">se.logHR</span><span class="op">**</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>A multivariate random-effects model can now be used to simultaneously
meta-analyze the hazard ratios for overall and progression-free
survival:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res.MV</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wviechtb.github.io/metafor/reference/rma.mv.html" class="external-link">rma.mv</a></span><span class="op">(</span>yi <span class="op">=</span> <span class="va">logHR</span>, </span>
<span>                 V <span class="op">=</span> <span class="va">V</span>, </span>
<span>                 mods <span class="op">=</span> <span class="op">~</span> <span class="va">outcome</span> <span class="op">-</span> <span class="fl">1</span>, </span>
<span>                 random <span class="op">=</span> <span class="op">~</span> <span class="va">outcome</span> <span class="op">|</span> <span class="va">Study</span>, </span>
<span>                 struct <span class="op">=</span> <span class="st">"UN"</span>, </span>
<span>                 data <span class="op">=</span> <span class="va">Zhang</span>, </span>
<span>                 method <span class="op">=</span> <span class="st">"REML"</span><span class="op">)</span></span>
<span><span class="va">res.MV</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Multivariate Meta-Analysis Model (k = 20; method: REML)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Variance Components:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## outer factor: Study   (nlvls = 16)</span></span>
<span><span class="co">## inner factor: outcome (nlvls = 2)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##             estim    sqrt  k.lvl  fixed  level </span></span>
<span><span class="co">## tau^2.1    0.0865  0.2942     14     no     OS </span></span>
<span><span class="co">## tau^2.2    0.0770  0.2775      6     no    PFS </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##      rho.OS  rho.PFS    OS  PFS </span></span>
<span><span class="co">## OS        1              -    4 </span></span>
<span><span class="co">## PFS  1.0000        1    no    - </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Test for Residual Heterogeneity:</span></span>
<span><span class="co">## QE(df = 18) = 33.7664, p-val = 0.0135</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Test of Moderators (coefficients 1:2):</span></span>
<span><span class="co">## QM(df = 2) = 35.6315, p-val &lt; .0001</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Model Results:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##             estimate      se    zval    pval   ci.lb   ci.ub      </span></span>
<span><span class="co">## outcomeOS     0.6704  0.1318  5.0868  &lt;.0001  0.4121  0.9287  *** </span></span>
<span><span class="co">## outcomePFS    0.8734  0.2151  4.0606  &lt;.0001  0.4518  1.2950  *** </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre>
<p>The summary estimate of the log hazard ratio for overall survival is
0.670 (multivariate meta-analysis) versus 0.667 (univariate
meta-analysis) with an SE of 0.132 and, respectively, 0.135. Hence, we
gained some precision by including evidence from 2 additional studies
that only evaluated progression-free survival.</p>
<table class="table">
<colgroup>
<col width="27%">
<col width="28%">
<col width="7%">
<col width="11%">
<col width="8%">
<col width="5%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">Outcome</th>
<th align="left">Model</th>
<th align="center"><span class="math inline">\(\mu\)</span></th>
<th align="center">SE(<span class="math inline">\(\mu\)</span>)</th>
<th align="center"><span class="math inline">\(\tau\)</span></th>
<th align="left">HR</th>
<th align="left">95% CI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Overall Survival</td>
<td align="left">Univariate meta-analysis</td>
<td align="center">0.667</td>
<td align="center">0.135</td>
<td align="center">0.297</td>
<td align="left">1.95</td>
<td align="left">1.49; 2.54</td>
</tr>
<tr class="even">
<td align="left">Overall Survival</td>
<td align="left">Multivariate meta-analysis</td>
<td align="center">0.670</td>
<td align="center">0.132</td>
<td align="center">0.294</td>
<td align="left">1.95</td>
<td align="left">1.51; 2.53</td>
</tr>
<tr class="odd">
<td align="left">Progression-free Survival</td>
<td align="left">Univariate meta-analysis</td>
<td align="center">0.815</td>
<td align="center">0.201</td>
<td align="center">0.168</td>
<td align="left">2.26</td>
<td align="left">1.52; 3.35</td>
</tr>
<tr class="even">
<td align="left">Progression-free Survival</td>
<td align="left">Multivariate meta-analysis</td>
<td align="center">0.873</td>
<td align="center">0.215</td>
<td align="center">0.277</td>
<td align="left">2.40</td>
<td align="left">1.57; 3.65</td>
</tr>
</tbody>
</table>
<p>Note that estimation of between-study heterogeneity was difficult for
progression-free survival due to the limited number of studies. In
particular, we found <span class="math inline">\(\tau^2\)</span>= 0.028
with an SE of 0.145. In the multivariate meta-analysis, the estimated
between-study variance for PFS was much larger (<span class="math inline">\(\tau^2\)</span>=0.077), and based on all 16 rather
than merely 6 studies.</p>
<p>In summary, the multivariate meta-analysis approach is often helpful
as it reduces the need to exclude relevant studies from a meta-analysis,
thereby decreasing the risk of bias (e.g. due to selective outcome
reporting) and potentially improving precision. As indicated by <span class="citation">Riley and White (2017)</span>, a multivariate
meta-analysis of multiple outcomes is most beneficial when the outcomes
are highly correlated and the percentage of studies with missing
outcomes is large.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-altman_systematic_2001" class="csl-entry">
Altman, D. G. 2001. <em>Systematic Reviews of Evaluations of Prognostic
Variables</em>. BMJ 323 (7306): 224–28.
</div>
<div id="ref-altman_how_2011" class="csl-entry">
Altman, Douglas G., and J. Martin Bland. 2011. <em>How to Obtain the p
Value from a Confidence Interval</em>. BMJ 343: d2304.
</div>
<div id="ref-debray_detecting_2018" class="csl-entry">
Debray, and Richard D. Riley. 2018. <em>Detecting Small-Study Effects
and Funnel Plot Asymmetry in Meta-Analysis of Survival Data: A
Comparison of New and Existing Tests</em>. Res. Syn. Meth. 9 (1): 41–50.
doi:10.1002/jrsm.1266.
</div>
<div id="ref-riley_prognosis_2013" class="csl-entry">
Riley. 2013. <em>Prognosis Research Strategy (PROGRESS) 2: Prognostic
Factor Research</em>. PLoS Medicine 10 (2): e1001380.
doi:10.1371/journal.pmed.1001380.
</div>
<div id="ref-riley_reporting_2003" class="csl-entry">
Riley, and S. A. Burchill. 2003. <em>Reporting of Prognostic Markers:
Current Problems and Development of Guidelines for Evidence-Based
Practice in the Future</em>. Br. J. Cancer 88 (8): 1191–8.
doi:10.1038/sj.bjc.6600886.
</div>
<div id="ref-riley_interpretation_2011" class="csl-entry">
Riley, and J. J. Deeks. 2011. <em>Interpretation of Random Effects
Meta-Analyses</em>. BMJ 342 (feb10 2): d549–d549. doi:10.1136/bmj.d549.
</div>
<div id="ref-riley_multivariate_2017" class="csl-entry">
Riley, and Ian R. White. 2017. <em>Multivariate and Network
Meta-Analysis of Multiple Outcomes and Multiple Treatments: Rationale,
Concepts, and Examples</em>. BMJ 358 (September): j3932.
</div>
<div id="ref-sauerbrei_evidence-based_2006" class="csl-entry">
Sauerbrei, and Douglas G. Altman. 2006. <em>Evidence-Based Assessment
and Application of Prognostic Markers: The Long Way from Single Studies
to Meta-Analysis</em>. Communications in Statistics - Theory; Methods 35
(7): 1333–42. doi:10.1080/03610920600629666.
</div>
<div id="ref-tzoulaki_assessment_2009" class="csl-entry">
Tzoulaki, and John P. A. Ioannidis. 2009. <em>Assessment of Claims of
Improved Prediction Beyond the Framingham Risk Score</em>. JAMA 302
(21): 2345–52. doi:10.1001/jama.2009.1757.
</div>
<div id="ref-zhang_prognostic_2015" class="csl-entry">
Zhang, and Jing Sun. 2015. <em>Prognostic Role of Hormone Receptors in
Endometrial Cancer: A Systematic Review and Meta-Analysis</em>. World J
Surg Oncol 13 (June): 208. doi:10.1186/s12957-015-0619-1.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Thomas Debray, Valentijn de Jong.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
